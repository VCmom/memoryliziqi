<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>中文记忆力训练游戏</title>
    <style>
        /* 样式代码，与之前类似 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        html, body {
            height: 100%;
        }
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            background-color: #f0f0f0;
        }
        #game {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        #title {
            font-size: 36px;
            margin-bottom: 20px;
        }
        #description {
            font-size: 18px;
            margin-bottom: 40px;
            text-align: center;
            width: 80%;
        }
        #startButton, #submitButton, #nextButton, #restartButton {
            padding: 10px 20px;
            font-size: 18px;
            cursor: pointer;
            margin-top: 20px;
        }
        #wordDisplay {
            font-size: 48px;
            margin-bottom: 20px;
        }
        #translationDisplay {
            font-size: 24px;
            margin-bottom: 20px;
            color: #555;
        }
        #countdown {
            font-size: 24px;
            margin-bottom: 20px;
        }
        #inputArea {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        #userInput {
            padding: 10px;
            font-size: 18px;
            width: 300px;
            text-align: center;
        }
        #levelIndicators {
            display: flex;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        .levelIndicator {
            width: 30px;
            height: 30px;
            background-color: #ccc;
            margin: 5px;
            border-radius: 5px;
        }
        .correct {
            background-color: #4caf50 !important;
        }
        .incorrect {
            background-color: #f44336 !important;
        }
        #result {
            font-size: 24px;
            margin-bottom: 20px;
            text-align: center;
        }
        #finalScore {
            font-size: 32px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div id="game">
        <div id="title">中文记忆力训练游戏</div>
        <div id="description">
            游戏规则：<br>
            游戏有20关，每一关都是5秒钟，从您选择的中文词汇中挑选出1到20个字的词语。<br>
            每一关会出现一个对应长度的中文词语和其英文翻译，请在5秒内记住它。<br>
            时间结束后，输入你记住的中文词语，看看能否答对。<br>
            游戏顶部有一行20个格子，每一个格子代表一关，<br>
            答对显示绿色，答错显示红色。<br>
            最后20关结束后，显示你的总分，得分越高越优秀！
        </div>
        <button id="startButton">开始游戏</button>
        <div id="wordDisplay" style="display:none;"></div>
        <div id="translationDisplay" style="display:none;"></div>
        <div id="countdown" style="display:none;">倒计时：5秒</div>
        <div id="inputArea" style="display:none;">
            <input type="text" id="userInput" placeholder="输入你记住的中文">
            <button id="submitButton">提交</button>
        </div>
        <div id="result" style="display:none;"></div>
        <button id="nextButton" style="display:none;">下一关</button>
        <button id="restartButton" style="display:none;">重新开始</button>
        <div id="levelIndicators" style="display:none;"></div>
    </div>

    <script>
        const startButton = document.getElementById('startButton');
        const wordDisplay = document.getElementById('wordDisplay');
        const translationDisplay = document.getElementById('translationDisplay');
        const countdown = document.getElementById('countdown');
        const inputArea = document.getElementById('inputArea');
        const userInput = document.getElementById('userInput');
        const submitButton = document.getElementById('submitButton');
        const result = document.getElementById('result');
        const nextButton = document.getElementById('nextButton');
        const restartButton = document.getElementById('restartButton');
        const levelIndicators = document.getElementById('levelIndicators');
        const description = document.getElementById('description');
        const game = document.getElementById('game');

        let currentLevel = 1;
        let totalLevels = 20;
        let score = 0;
        let wordToRemember = '';
        let countdownTimer;
        let countdownSeconds = 5;

        // 更新的中文词语和对应的英文翻译
        const words = [
            { chinese: '田园', english: 'Pastoral' },
            { chinese: '自然', english: 'Nature' },
            { chinese: '美食', english: 'Cuisine' },
            { chinese: '手工', english: 'Handmade' },
            { chinese: '传统', english: 'Tradition' },
            { chinese: '农村', english: 'Countryside' },
            { chinese: '生活', english: 'Life' },
            { chinese: '美丽', english: 'Beautiful' },
            { chinese: '安静', english: 'Quiet' },
            { chinese: '幸福', english: 'Happiness' },
            { chinese: '收获', english: 'Harvest' },
            { chinese: '季节', english: 'Season' },
            { chinese: '食材', english: 'Ingredients' },
            { chinese: '烹饪', english: 'Cooking' },
            { chinese: '艺术', english: 'Art' },
            { chinese: '家庭', english: 'Family' },
            { chinese: '文化', english: 'Culture' },
            { chinese: '创意', english: 'Creativity' },
            { chinese: '花园', english: 'Garden' },
            { chinese: '笑声', english: 'Laughter' }
        ];

        const levelPoints = Array.from({length: totalLevels}, (_, i) => (i + 1) * 5);

        startButton.addEventListener('click', startGame);
        submitButton.addEventListener('click', checkAnswer);
        nextButton.addEventListener('click', nextLevel);
        restartButton.addEventListener('click', restartGame);

        function startGame() {
            startButton.style.display = 'none';
            description.style.display = 'none';
            levelIndicators.style.display = 'flex';
            initLevelIndicators();
            startLevel();
        }

        function initLevelIndicators() {
            levelIndicators.innerHTML = '';
            for(let i = 0; i < totalLevels; i++) {
                const indicator = document.createElement('div');
                indicator.classList.add('levelIndicator');
                levelIndicators.appendChild(indicator);
            }
        }

        function startLevel() {
            wordToRemember = words[currentLevel - 1].chinese;
            const englishTranslation = words[currentLevel - 1].english;
            wordDisplay.textContent = wordToRemember;
            translationDisplay.textContent = `英文翻译：${englishTranslation}`;
            wordDisplay.style.display = 'block';
            translationDisplay.style.display = 'block';
            countdown.style.display = 'block';
            countdownSeconds = 5;
            countdown.textContent = `倒计时：${countdownSeconds}秒`;
            countdownTimer = setInterval(updateCountdown, 1000);
        }

        function updateCountdown() {
            countdownSeconds--;
            countdown.textContent = `倒计时：${countdownSeconds}秒`;
            if(countdownSeconds <= 0) {
                clearInterval(countdownTimer);
                wordDisplay.style.display = 'none';
                translationDisplay.style.display = 'none';
                countdown.style.display = 'none';
                inputArea.style.display = 'flex';
                userInput.value = '';
                userInput.focus();
            }
        }

        function checkAnswer() {
            let userAnswer = userInput.value.trim();
            inputArea.style.display = 'none';
            result.style.display = 'block';
            nextButton.style.display = 'block';

            const indicators = document.querySelectorAll('.levelIndicator');

            if(userAnswer === wordToRemember) {
                result.textContent = '答对了！';
                result.style.color = '#4caf50';
                indicators[currentLevel - 1].classList.add('correct');
                score += levelPoints[currentLevel - 1];
            } else {
                result.textContent = `答错了！正确答案是：${wordToRemember}`;
                result.style.color = '#f44336';
                indicators[currentLevel - 1].classList.add('incorrect');
            }
        }

        function nextLevel() {
            result.style.display = 'none';
            nextButton.style.display = 'none';
            currentLevel++;
            if(currentLevel > totalLevels) {
                endGame();
            } else {
                startLevel();
            }
        }

        function endGame() {
            levelIndicators.style.display = 'none';
            wordDisplay.style.display = 'none';
            translationDisplay.style.display = 'none';
            countdown.style.display = 'none';
            inputArea.style.display = 'none';
            result.style.display = 'none';
            nextButton.style.display = 'none';
            restartButton.style.display = 'block';

            const finalScore = document.createElement('div');
            finalScore.id = 'finalScore';
            finalScore.textContent = `你的总得分是：${score} 分`;
            game.appendChild(finalScore);

            const evaluation = document.createElement('div');
            evaluation.id = 'evaluation';
            if(score >= 840) {
                evaluation.textContent = '优秀！';
                evaluation.style.color = '#4caf50';
            } else {
                evaluation.textContent = '继续加油！';
                evaluation.style.color = '#f44336';
            }
            game.appendChild(evaluation);
        }

        function restartGame() {
            currentLevel = 1;
            score = 0;
            wordToRemember = '';
            restartButton.style.display = 'none';
            const finalScore = document.getElementById('finalScore');
            const evaluation = document.getElementById('evaluation');
            if(finalScore) finalScore.remove();
            if(evaluation) evaluation.remove();
            initLevelIndicators();
            levelIndicators.style.display = 'flex';
            startLevel();
        }
    </script>
</body>
</html>
